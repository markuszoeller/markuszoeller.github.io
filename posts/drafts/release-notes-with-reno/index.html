<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Release Notes with reno &#8212; Markus Zoeller Blog</title>
    
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/asciinema-player.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/js/asciinema-player.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../../../about/" />
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" />
  
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  
  <link rel="alternate" type="application/atom+xml"  href="../../../posts/atom.xml" title="Markus's Brain Swap Space">
  
  
  <style type="text/css">
    ul.ablog-archive {list-style: none; overflow: auto; margin-left: 0px}
    ul.ablog-archive li {float: left; margin-right: 5px; font-size: 80%}
    ul.postlist a {font-style: italic;}
    ul.postlist-style-disc {list-style-type: disc;}
    ul.postlist-style-none {list-style-type: none;}
    ul.postlist-style-circle {list-style-type: circle;}
  </style>

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../">
          MZIO</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../../../about/">About</a></li>
                <li><a href="../../category/">Categories</a></li>
                <li><a href="../../tag/">Tags</a></li>
                <li><a href="../../archive/">Archives</a></li>
                <li><a href="/posts/atom.xml"><i class='fa fa-rss-square' aria-hidden='true'></i></a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../search/" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="release-notes-with-reno">
<h1>Release Notes with <em>reno</em><a class="headerlink" href="#release-notes-with-reno" title="Permalink to this headline"> </a></h1>
<p><em>&#8220;What features merged since the last release?&#8221;</em> &#8211;
<em>&#8220;Did we introduce something which might break a deployment?&#8221;</em> &#8211;
<em>&#8220;Let me grep through the commit history to check what happened.&#8221;</em>
Remember sentences like these when you&#8217;re about to release? If you
like this fire-fighting mode, ignore this post. If you want to have a
more relaxed release, this post will show you how to use a tool called
<em>reno</em> to manage your release notes.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#tl-dr" id="id13">TL;DR</a></li>
<li><a class="reference internal" href="#use-case" id="id14">Use Case</a></li>
<li><a class="reference internal" href="#benefits" id="id15">Benefits</a></li>
<li><a class="reference internal" href="#alternatives" id="id16">Alternatives</a></li>
<li><a class="reference internal" href="#the-demo-application-and-environment" id="id17">The demo application and environment</a></li>
<li><a class="reference internal" href="#how-to-add-the-reno-report-to-my-documentation" id="id18">How to add the <em>reno</em> report to my documentation</a></li>
<li><a class="reference internal" href="#add-a-release-note-and-show-it-in-the-docs" id="id19">Add a release note and show it in the docs</a></li>
<li><a class="reference internal" href="#add-a-release-note-with-a-code-change" id="id20">Add a release note with a code change</a></li>
<li><a class="reference internal" href="#content" id="id21">Content</a></li>
<li><a class="reference internal" href="#conclusion" id="id22">Conclusion</a></li>
<li><a class="reference internal" href="#references" id="id23">References</a></li>
</ul>
</div>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">date</p>
</div>
<table border="1" class="docutils" id="id12">
<caption><span class="caption-text">Change history:</span><a class="headerlink" href="#id12" title="Permalink to this table"> </a></caption>
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Date</th>
<th class="head">Change description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>YYYY-MM-DD</td>
<td>The first release</td>
</tr>
</tbody>
</table>
<div class="section" id="tl-dr">
<h2><a class="toc-backref" href="#contents">TL;DR</a><a class="headerlink" href="#tl-dr" title="Permalink to this headline"> </a></h2>
<p>Below is the shortest end-to-end example I can think of. The steps are:</p>
<ol class="arabic simple">
<li>Install the needed software</li>
<li>Create a git repository</li>
<li>Create a release note with <em>reno</em></li>
<li>Commit the release note to the repo</li>
<li>Create a report out of all committed release notes</li>
</ol>
<p>I trimmed some of the unnecessary output with <em>[...]</em>:</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98</pre></div></td><td class="code"><div class="highlight"><pre><span></span> $ apt-get install -y git                     <span class="c1"># reno operates on git repos</span>
 $ git init                                   <span class="c1"># initialize a git repo</span>
 $ git config user.name <span class="s2">&quot;John Doe&quot;</span>            <span class="c1"># configure git repo (1/2)</span>
 $ git config user.email <span class="s2">&quot;jd@example.com&quot;</span>     <span class="c1"># configure git repo (2/2)</span>
 $ apt-get install -y python-pip              <span class="c1"># we will install reno with pip</span>
 $ pip install reno                           <span class="c1"># install reno from PyPi</span>
 $ reno new my-first-release-note             <span class="c1"># create a release note</span>
 Created new notes file in releasenotes/notes/my-first-release-note-21b284249cec129c.yaml
 $ git add -A                                 <span class="c1"># Add the release note to the repo</span>
 $ git commit -m <span class="s2">&quot;Add my first release note&quot;</span>  <span class="c1"># commit the release note</span>
 $
 $ reno list                                  <span class="c1"># list the release notes</span>
 scanning ./releasenotes/notes <span class="o">(</span><span class="nv">branch</span><span class="o">=</span>*current* <span class="nv">earliest_version</span><span class="o">=</span>None<span class="o">)</span>
 including entire branch <span class="nb">history</span>
 21b284249cec129c: adding releasenotes/notes/my-first-release-note-21b284249cec129c.yaml from <span class="m">0</span>.0.0
 <span class="m">0</span>.0.0
     releasenotes/notes/my-first-release-note-21b284249cec129c.yaml <span class="o">(</span>01a57fb590b9145fbc6bd24bb924c8f62396bf22<span class="o">)</span>
 $
 $ reno report                                <span class="c1"># create a report</span>
 scanning ./releasenotes/notes <span class="o">(</span><span class="nv">branch</span><span class="o">=</span>*current* <span class="nv">earliest_version</span><span class="o">=</span>None<span class="o">)</span>
 including entire branch <span class="nb">history</span>
 21b284249cec129c: adding releasenotes/notes/my-first-release-note-21b284249cec129c.yaml from <span class="m">0</span>.0.0
 <span class="o">=============</span>
 Release <span class="nv">Notes</span>
 <span class="o">=============</span>

 <span class="m">0</span>.0.0
 <span class="o">=====</span>

 Prelude
 -------

 .. releasenotes/notes/my-first-release-note-<span class="o">[</span>...<span class="o">]</span>

 Replace this text with content <span class="o">[</span>...<span class="o">]</span>

 New Features
 ------------

 .. releasenotes/notes/my-first-release-note-<span class="o">[</span>...<span class="o">]</span>

 - List new features here, or remove this section. <span class="o">[</span>...<span class="o">]</span>


 Known Issues
 ------------

 .. releasenotes/notes/my-first-release-note-<span class="o">[</span>...<span class="o">]</span>

 - List known issues here, or remove this section. <span class="o">[</span>...<span class="o">]</span>


 Upgrade Notes
 -------------

 .. releasenotes/notes/my-first-release-note-<span class="o">[</span>...<span class="o">]</span>

 - List upgrade notes here, or remove this section. <span class="o">[</span>...<span class="o">]</span>


 Deprecation Notes
 -----------------

 .. releasenotes/notes/my-first-release-note-<span class="o">[</span>...<span class="o">]</span>

 - List deprecations notes here, or remove this section. <span class="o">[</span>...<span class="o">]</span>


 Critical Issues
 ---------------

 .. releasenotes/notes/my-first-release-note-<span class="o">[</span>...<span class="o">]</span>

 - Add critical notes here, or remove this section. <span class="o">[</span>...<span class="o">]</span>


 Security Issues
 ---------------

 .. releasenotes/notes/my-first-release-note-<span class="o">[</span>...<span class="o">]</span>

 - Add security notes here, or remove this section. <span class="o">[</span>...<span class="o">]</span>


 Bug Fixes
 ---------

 .. releasenotes/notes/my-first-release-note-<span class="o">[</span>...<span class="o">]</span>

 - Add normal bug fixes here, or remove this section. <span class="o">[</span>...<span class="o">]</span>


 Other Notes
 -----------

 .. releasenotes/notes/my-first-release-note-<span class="o">[</span>...<span class="o">]</span>

 - Add other notes here, or remove this section. <span class="o">[</span>...<span class="o">]</span>
</pre></div>
</td></tr></table></div>
<p>Things you notice from this example are:</p>
<ul class="simple">
<li><em>reno</em> creates its release notes in a directory <code class="docutils literal"><span class="pre">releasenotes</span></code> under
the root directory of your project.</li>
<li>A release note is a <code class="docutils literal"><span class="pre">YAML</span></code> file which uses a combination of the
name you provided and a hash-like text. This ensures uniqueness in
file names.</li>
<li>The default template which our release note is based on used
embedded <em>restructured text</em> for the markup of our prose.</li>
<li>The report combines all of our release notes (only one so far) into
something you can use in a release letter.</li>
<li>The report also lists a version number (<code class="docutils literal"><span class="pre">0.0.0</span></code> in this example)
which can be influenced with <em>git tagging</em>.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Most of the content in this post is based on <a class="footnote-reference" href="#reno" id="id1">[2]</a>.</p>
</div>
<p>The next sections will dive deeper into specific questions on how to
use <em>reno</em> in your (most likely code driven) project.</p>
</div>
<div class="section" id="use-case">
<h2><a class="toc-backref" href="#contents">Use Case</a><a class="headerlink" href="#use-case" title="Permalink to this headline"> </a></h2>
<p>It got developed to fit the needs
of the <em>OpenStack</em> upstream development, but it can be used in any other
project as well.</p>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">describe the use case here</p>
</div>
</div>
<div class="section" id="benefits">
<h2><a class="toc-backref" href="#contents">Benefits</a><a class="headerlink" href="#benefits" title="Permalink to this headline"> </a></h2>
<ul class="simple">
<li>The release notes can be reviewed like code.</li>
<li>The release note is part of the code change which makes the release note
necessary.</li>
<li>Backports to stable branches already contain the release note.</li>
<li>Merge conflicts to the common release letter are next to impossible</li>
<li>Have a (customizable) template of release specific sections which are
the most important ones for your users</li>
<li>A <em>Sphinx document generator</em> plugin is available.</li>
</ul>
</div>
<div class="section" id="alternatives">
<h2><a class="toc-backref" href="#contents">Alternatives</a><a class="headerlink" href="#alternatives" title="Permalink to this headline"> </a></h2>
<p>Alternatives could be:</p>
<ul class="simple">
<li>Make the release note part of the git commit message.</li>
<li>Only use files with a naming convention and parse them separately.</li>
<li>Use the git notes feature.</li>
</ul>
</div>
<div class="section" id="the-demo-application-and-environment">
<h2><a class="toc-backref" href="#contents">The demo application and environment</a><a class="headerlink" href="#the-demo-application-and-environment" title="Permalink to this headline"> </a></h2>
<p>This post contains an example application (called <code class="docutils literal"><span class="pre">tsk-mgr</span></code>) we
will use to demo the usage of <em>reno</em> in a more real-world
manner. <code class="docutils literal"><span class="pre">tsk-mgr</span></code> is a TODO list management tool with a CLI interface and
persistence by using the Python shelve library <a class="footnote-reference" href="#shelve" id="id2">[5]</a>. It
has a <code class="docutils literal"><span class="pre">docs</span></code> directory which uses <em>Sphinx</em> <a class="footnote-reference" href="#sphinx" id="id3">[6]</a> as documentation
generator. The structure of the app got created with <em>cookiecutter</em> <a class="footnote-reference" href="#cookie" id="id4">[4]</a>.</p>
<p>To reproduce the actions below on your local laptop, download the
<a class="reference download internal" href="../../../_downloads/release-notes-with-reno.tar.gz" download=""><code class="xref download docutils literal"><span class="pre">project</span> <span class="pre">source</span> <span class="pre">files</span></code></a>.
The environment is based on <em>Vagrant</em> <a class="footnote-reference" href="#vagrant" id="id5">[3]</a>. After extracting
the archive, use the demo environment like this:</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">[</span>markus@local<span class="o">]</span>$ vagrant up
<span class="o">[</span>markus@local<span class="o">]</span>$ vagrant ssh
vagrant@reno:~$ sudo su -
root@reno:~# <span class="nb">cd</span> /applications/tsk_mgr/
root@reno:/applications/tsk_mgr# <span class="m">2</span>&gt;/dev/null <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span> python -m SimpleHTTPServer <span class="p">&amp;</span>
</pre></div>
</td></tr></table></div>
<p>Install and use the app like this:</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ python setup.py develop   <span class="c1"># install the app in development mode</span>
$ <span class="o">[</span>...<span class="o">]</span>
$
$ tskmgr --help             <span class="c1"># call the app</span>
Demo Tasks Mgmt.

Usage:
  tskmgr create &lt;title&gt;
  tskmgr list
  tskmgr update &lt;id&gt; &lt;<span class="nv">attr</span><span class="o">=</span>value&gt;...
  tskmgr <span class="o">(</span>-h <span class="p">|</span> --help<span class="o">)</span>
  tskmgr --version

Options:
  -h --help     Show this screen.
  --version     Show version.
$
$ tskmgr create <span class="s2">&quot;Write a post about reno&quot;</span>
created: 5e16bde4-b1f6-4c9b-a090-cec9573c0a89 <span class="p">|</span> Write a post about reno
$
$ tskmgr list
Current tasks:
* Write a post about reno
</pre></div>
</td></tr></table></div>
<p>We build the documentation with:</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ make docs       <span class="c1"># alternatively: cd docs &amp;&amp; make html</span>
</pre></div>
</td></tr></table></div>
<p>Under the covers, this uses the <code class="docutils literal"><span class="pre">sphinx-build</span></code> command from <em>Sphinx</em>,
but we won&#8217;t dive deeper into this. Further reading can be found at
<a class="footnote-reference" href="#sphinxb" id="id6">[7]</a>.</p>
<p>Now you can access the documentation in your local browser via the
URL <code class="docutils literal"><span class="pre">http://192.168.159.11:8000/docs/_build/html/index.html</span></code>. The
IP address got specified in the <code class="docutils literal"><span class="pre">Vagrantfile</span></code> and the port <code class="docutils literal"><span class="pre">8000</span></code>
is the default for <code class="docutils literal"><span class="pre">SimpleHTTPServer</span></code> <a class="footnote-reference" href="#simplehttp" id="id7">[10]</a>.</p>
<p>If you don&#8217;t like to use it anymore, destroy the environment with
<code class="docutils literal"><span class="pre">vagrant</span> <span class="pre">destroy</span> <span class="pre">-f</span></code> and remove the directory. You&#8217;re laptop will
be clean like nothing happened.</p>
</div>
<div class="section" id="how-to-add-the-reno-report-to-my-documentation">
<h2><a class="toc-backref" href="#contents">How to add the <em>reno</em> report to my documentation</a><a class="headerlink" href="#how-to-add-the-reno-report-to-my-documentation" title="Permalink to this headline"> </a></h2>
<p>We will use the file <code class="docutils literal"><span class="pre">docs/history.rst</span></code> for our release notes. We start
with this view of the application release history:</p>
<a class="reference internal image-reference" href="../../../_images/sphinx_history_000_vwZSWlz.png"><img alt="Example app's documentation with Sphinx: Starting point" src="../../../_images/sphinx_history_000_vwZSWlz.png" style="height: 300px;" /></a>
<p>We will use the <em>reno</em> Sphinx extension:</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span> $ pip install <span class="s1">&#39;reno[sphinx]&#39;</span>
</pre></div>
</td></tr></table></div>
<p>After that, we can add it to the <em>Sphinx</em> configuration file at
<code class="docutils literal"><span class="pre">docs/conf.py</span></code>. This diff shows the line to add to the <code class="docutils literal"><span class="pre">extensions</span></code>
list:</p>
<div class="highlight-diff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gh">diff --git a/docs/conf.py b/docs/conf.py</span>
<span class="gh">index c6d3e26..031653c 100755</span>
<span class="gd">--- a/docs/conf.py</span>
<span class="gi">+++ b/docs/conf.py</span>
<span class="gu">@@ -45,6 +45,7 @@ import tsk_mgr</span>
 extensions = [
     &#39;sphinx.ext.autodoc&#39;,
     &#39;sphinx.ext.viewcode&#39;,
<span class="gi">+    &#39;reno.sphinxext&#39;,</span>
     ]

 # Add any paths that contain templates here, relative to this directory.
</pre></div>
</td></tr></table></div>
<p>We will show the release notes in <code class="docutils literal"><span class="pre">docs/history.rst</span></code>. Use the
<code class="docutils literal"><span class="pre">release-notes</span></code> directive we gained from installing the <em>reno</em> <em>Sphinx</em>
extension:</p>
<div class="highlight-rst"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">release-notes</span><span class="p">::</span> Release Notes
</pre></div>
</td></tr></table></div>
<a class="reference internal image-reference" href="../../../_images/sphinx_history_reno_px2JD7k.png"><img alt="Example app's documentation with Sphinx: Using *reno*" src="../../../_images/sphinx_history_reno_px2JD7k.png" style="height: 300px;" /></a>
<p>It&#8217;s empty for now, as we haven&#8217;t yet added a release note to this
project.</p>
</div>
<div class="section" id="add-a-release-note-and-show-it-in-the-docs">
<h2><a class="toc-backref" href="#contents">Add a release note and show it in the docs</a><a class="headerlink" href="#add-a-release-note-and-show-it-in-the-docs" title="Permalink to this headline"> </a></h2>
<p>Let&#8217;s assume we want to release the app (to <em>PypI</em> for example)
but we discovered that the update of tasks doesn&#8217;t work. Instead of
delaying the release date, we create a release note which states this
known issue:</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ reno new ki-update-not-working
Created new notes file in releasenotes/notes/ki-update-not-working-8f89e1c561bc7c91.yaml
</pre></div>
</td></tr></table></div>
<p>I used the prefix <code class="docutils literal"><span class="pre">ki</span></code> for <em>known issue</em>, but that&#8217;s entirely optional.</p>
<p>Edit the <em>yaml</em> file with your editor of choice so that you have this
content:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">issues</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">&gt;</span>
    <span class="no">The update procedure doesn&#39;t work at the moment. This means that the</span>
    <span class="no">command ``tsk-mgr.py update`` throws an error.</span>
</pre></div>
</td></tr></table></div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">The char <code class="docutils literal"><span class="pre">&gt;</span></code> is <em>YAML folding syntax</em>. It replaces every line break
with a space. If you want to keep the line breaks as you specified them,
use the <code class="docutils literal"><span class="pre">|</span></code> char. More details at <a class="footnote-reference" href="#yamlsyn" id="id8">[8]</a> or the official
spec <a class="footnote-reference" href="#yamlspec" id="id9">[9]</a>.</p>
</div>
<p>Remember, <em>reno</em> works on your git repository. Add the release note
and commit it:</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ git add -A
$ git commit -m <span class="s2">&quot;Add known issue about update&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Build the docs again with <code class="docutils literal"><span class="pre">make</span> <span class="pre">docs</span></code> and refresh the history page:</p>
<a class="reference internal image-reference" href="../../../_images/sphinx_reno_first_note_k6gtr5g.png"><img alt="First *reno* release note in our application docs." src="../../../_images/sphinx_reno_first_note_k6gtr5g.png" style="height: 300px;" /></a>
<p>Here you see that the embedded <em>restructured text</em> in the YAML file
can be interpreted and rendered by the <em>reno</em> <em>Sphinx</em> extension. This allows
you to format the release notes for easier consumption for your users.</p>
</div>
<div class="section" id="add-a-release-note-with-a-code-change">
<h2><a class="toc-backref" href="#contents">Add a release note with a code change</a><a class="headerlink" href="#add-a-release-note-with-a-code-change" title="Permalink to this headline"> </a></h2>
<p>The examples before showed the usage of <em>reno</em> when no code was involved.
We change this by doing an actual fix in the application.</p>
<p>Our app works fine in <em>Python 2</em>, but the <code class="docutils literal"><span class="pre">shelve</span></code> library behaves
differently in <em>Python 3</em>. We see this issue:</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ python -V
Python <span class="m">3</span>.5.2
$
$ tskmgr list list
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
<span class="o">[</span>...<span class="o">]</span>
dbm.error: db <span class="nb">type</span> could not be determined
</pre></div>
</td></tr></table></div>
<p>We fix this in the code and add a release note for the users to notice.
The git commit consists of two files:</p>
<ul class="simple">
<li>the changed functional code</li>
<li>the release note for this</li>
</ul>
<p>The diff looks like this:</p>
<div class="highlight-diff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gh">diff --git a/releasenotes/notes/bf-list-in-py3-a2ea5423b9d538f0.yaml b/releasenotes/notes/bf-list-in-py3-a2ea5423b9d538f0.yaml</span>
new file mode 100644
<span class="gh">index 0000000..8bf1bf5</span>
<span class="gd">--- /dev/null</span>
<span class="gi">+++ b/releasenotes/notes/bf-list-in-py3-a2ea5423b9d538f0.yaml</span>
<span class="gu">@@ -0,0 +1,5 @@</span>
<span class="gi">+---</span>
<span class="gi">+fixes:</span>
<span class="gi">+  - &gt;</span>
<span class="gi">+    The command ``tskmgr list`` didn&#39;t work on Python3. This is fixed now.</span>
<span class="gi">+</span>
<span class="gh">diff --git a/tsk_mgr/tsk_mgr.py b/tsk_mgr/tsk_mgr.py</span>
<span class="gh">index 037840a..0f4bfa3 100755</span>
<span class="gd">--- a/tsk_mgr/tsk_mgr.py</span>
<span class="gi">+++ b/tsk_mgr/tsk_mgr.py</span>
<span class="gu">@@ -121,7 +121,7 @@ class Persistence(object):</span>

     def list_tasks(self):
         db = shelve.open(Persistence.FILE_NAME, writeback=True)
<span class="gd">-        tasks = db.values()</span>
<span class="gi">+        tasks = [t for t in db.values()]</span>
         db.close()
         return tasks
</pre></div>
</td></tr></table></div>
<p>That&#8217;s the beauty of release note management with <em>reno</em>. The documentation
is part of the very same code change.</p>
<p>The update documentation looks like this:</p>
<a class="reference internal image-reference" href="../../../_images/sphinx_reno_more_notes_DPPWC3y.png"><img alt="More *reno* release notes in our application docs." src="../../../_images/sphinx_reno_more_notes_DPPWC3y.png" style="height: 300px;" /></a>
</div>
<div class="section" id="content">
<h2><a class="toc-backref" href="#contents">Content</a><a class="headerlink" href="#content" title="Permalink to this headline"> </a></h2>
<div class="admonition-todo admonition" id="index-2">
<p class="first admonition-title">Todo</p>
<p class="last">add stuff here</p>
</div>
</div>
<div class="section" id="conclusion">
<h2><a class="toc-backref" href="#contents">Conclusion</a><a class="headerlink" href="#conclusion" title="Permalink to this headline"> </a></h2>
<div class="admonition-todo admonition" id="index-3">
<p class="first admonition-title">Todo</p>
<p class="last">explain more here and reference to it <a class="footnote-reference" href="#id11" id="id10">[1]</a></p>
</div>
</div>
<div class="section" id="references">
<h2><a class="toc-backref" href="#contents">References</a><a class="headerlink" href="#references" title="Permalink to this headline"> </a></h2>
<table class="docutils footnote" frame="void" id="id11" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id10">[1]</a></td><td>www.google.com</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="reno" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[2]</a></td><td><a class="reference external" href="https://docs.openstack.org/reno/latest/">https://docs.openstack.org/reno/latest/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="vagrant" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[3]</a></td><td><a class="reference external" href="https://www.vagrantup.com/intro/index.html">https://www.vagrantup.com/intro/index.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="cookie" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[4]</a></td><td><a class="reference external" href="https://pypi.python.org/pypi/cookiecutter/1.6.0">https://pypi.python.org/pypi/cookiecutter/1.6.0</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="shelve" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[5]</a></td><td><a class="reference external" href="https://docs.python.org/2/library/shelve.html">https://docs.python.org/2/library/shelve.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="sphinx" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[6]</a></td><td><a class="reference external" href="http://www.sphinx-doc.org/en/stable/">http://www.sphinx-doc.org/en/stable/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="sphinxb" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id6">[7]</a></td><td><a class="reference external" href="http://www.sphinx-doc.org/en/stable/man/sphinx-build.html">http://www.sphinx-doc.org/en/stable/man/sphinx-build.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="yamlsyn" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id8">[8]</a></td><td><a class="reference external" href="http://yaml-multiline.info/">http://yaml-multiline.info/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="yamlspec" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id9">[9]</a></td><td><a class="reference external" href="http://www.yaml.org/spec/1.2/spec.html#id2796251">http://www.yaml.org/spec/1.2/spec.html#id2796251</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="simplehttp" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id7">[10]</a></td><td><a class="reference external" href="https://docs.python.org/2.7/library/simplehttpserver.html">https://docs.python.org/2.7/library/simplehttpserver.html</a></td></tr>
</tbody>
</table>
</div>
</div>

  <div class="section">
  
    


  
  
  </div>

    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015-2017, Markus Zoeller.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.6.<br/>
    </p>
  </div>
</footer>
  </body>
</html>